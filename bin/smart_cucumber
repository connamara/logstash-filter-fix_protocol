#! /bin/bash

# With this guy, booting up jruby spec suite went from 18 -> 5 seconds
# Note, we needed gcc to configure/make nailgun server

# use of binstubs over bundle exec, to generate: `bundle binstub rspec-core`
CUKES="./bin/cucumber"

# Disable runtime optimization with JRUBY_OPTS
export JRUBY_OPTS="-Xcompile.invokedynamic=false -J-XX:+TieredCompilation -J-XX:TieredStopAtLevel=1 -J-noverify -Xcompile.mode=OFF"

CMD="$CUKES $@"
echo $CMD
$CMD

